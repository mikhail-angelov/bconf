{"version":3,"sources":["api/user/user.integration.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;AAMA,IAAI,MAAM,gBAAY,GAAZ;;AAEV,SAAS,WAAT,EAAsB,YAAW;AAC/B,MAAI,IAAJ;;;AAD+B,QAI/B,CAAO,YAAW;AAChB,WAAO,eAAK,WAAL,GAAmB,IAAnB,CAAwB,YAAW;AACxC,aAAO,mBAAS;AACd,cAAM,WAAN;AACA,eAAO,kBAAP;AACA,kBAAU,UAAV;OAHK,CAAP,CADwC;;AAOxC,aAAO,KAAK,SAAL,EAAP,CAPwC;KAAX,CAA/B,CADgB;GAAX,CAAP;;;AAJ+B,OAiB/B,CAAM,YAAW;AACf,WAAO,eAAK,WAAL,EAAP,CADe;GAAX,CAAN,CAjB+B;;AAqB/B,WAAS,mBAAT,EAA8B,YAAW;AACvC,QAAI,KAAJ,CADuC;;AAGvC,WAAO,UAAS,IAAT,EAAe;AACpB,+BAAQ,GAAR,EACG,IADH,CACQ,aADR,EAEG,IAFH,CAEQ;AACJ,eAAO,kBAAP;AACA,kBAAU,UAAV;OAJJ,EAMG,MANH,CAMU,GANV,EAOG,MAPH,CAOU,cAPV,EAO0B,MAP1B,EAQG,GARH,CAQO,UAAS,GAAT,EAAc,GAAd,EAAmB;AACtB,gBAAQ,IAAI,IAAJ,CAAS,KAAT,CADc;AAEtB,eAFsB;OAAnB,CARP,CADoB;KAAf,CAAP,CAHuC;;AAkBvC,OAAG,uDAAH,EAA4D,UAAS,IAAT,EAAe;AACzE,+BAAQ,GAAR,EACG,GADH,CACO,eADP,EAEG,GAFH,CAEO,eAFP,EAEwB,YAAY,KAAZ,CAFxB,CAGG,MAHH,CAGU,GAHV,EAIG,MAJH,CAIU,cAJV,EAI0B,MAJ1B,EAKG,GALH,CAKO,UAAS,GAAT,EAAc,GAAd,EAAmB;;AAEtB,YAAI,IAAJ,CAAS,GAAT,CAAa,QAAb,GAAwB,MAAxB,CAA+B,KAA/B,CAAqC,KAAK,GAAL,CAAS,QAAT,EAArC,EAFsB;AAGtB,eAHsB;OAAnB,CALP,CADyE;KAAf,CAA5D,CAlBuC;;AA+BvC,OAAG,kDAAH,EAAuD,UAAS,IAAT,EAAe;AACpE,+BAAQ,GAAR,EACG,GADH,CACO,eADP,EAEG,MAFH,CAEU,GAFV,EAGG,GAHH,CAGO,IAHP,EADoE;KAAf,CAAvD,CA/BuC;GAAX,CAA9B,CArB+B;CAAX,CAAtB","file":"api/user/user.integration.js","sourcesContent":["'use strict';\n\nimport application from '../../index';\nimport User from './user.model';\nimport request from 'supertest';\n\nlet app = application.app;\n\ndescribe('User API:', function() {\n  var user;\n\n  // Clear users before testing\n  before(function() {\n    return User.removeAsync().then(function() {\n      user = new User({\n        name: 'Fake User',\n        email: 'test@example.com',\n        password: 'password'\n      });\n\n      return user.saveAsync();\n    });\n  });\n\n  // Clear users after testing\n  after(function() {\n    return User.removeAsync();\n  });\n\n  describe('GET /api/users/me', function() {\n    var token;\n\n    before(function(done) {\n      request(app)\n        .post('/auth/local')\n        .send({\n          email: 'test@example.com',\n          password: 'password'\n        })\n        .expect(200)\n        .expect('Content-Type', /json/)\n        .end(function(err, res) {\n          token = res.body.token;\n          done();\n        });\n    });\n\n    it('should respond with a user profile when authenticated', function(done) {\n      request(app)\n        .get('/api/users/me')\n        .set('authorization', 'Bearer ' + token)\n        .expect(200)\n        .expect('Content-Type', /json/)\n        .end(function(err, res) {\n          //console.log(user);\n          res.body._id.toString().should.equal(user._id.toString());\n          done();\n        });\n    });\n\n    it('should respond with a 401 when not authenticated', function(done) {\n      request(app)\n        .get('/api/users/me')\n        .expect(401)\n        .end(done);\n    });\n  });\n});\n"],"sourceRoot":"/source/"}