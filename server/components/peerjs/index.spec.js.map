{"version":3,"sources":["components/peerjs/index.spec.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;AAMA,SAAS,QAAT,EAAmB,YAAY;;AAE7B,MAAI,WAAW,qBAAX,CAFyB;AAG7B,MAAI,MAAJ,CAH6B;AAI7B,MAAM,SAAS,YAAT,CAJuB;AAK7B,MAAI,aAAa,EAAC,IAAG,MAAH,EAAU,KAAI,MAAJ,EAAW,OAAM,MAAN,EAAa,IAAG,SAAH,EAAa,QAAO,EAAC,MAAK,MAAM,GAAN,EAAL,EAAkB,IAAG,MAAM,GAAN,EAAH,EAAgB,OAAM,MAAM,GAAN,EAAN,EAA1C,EAA7D,CALyB;AAM7B,MAAI,WAAW,EAAC,cAAa;aAAI;KAAJ,EAAS,qBAAoB;aAAI;KAAJ,EAAtD,CANyB;;AAQ7B,SAAO,YAAY;AACjB,aAAS,oBAAkB,QAAlB,qBAAqC,QAArC,CAAT,CADiB;GAAZ,CAAP,CAR6B;;AAc7B,KAAG,sBAAH,EAA2B,YAAY;AACrC,WAAO,MAAP,CAAc,EAAd,CAAiB,OAAjB,CADqC;GAAZ,CAA3B,CAd6B;;AAkB7B,KAAG,+CAAH,EAAoD,UAAU,IAAV,EAAgB;AAClE,aAAS,IAAT,CAAc,SAAS,aAAT,EAAwB,UAAC,MAAD,EAAU;AAC9C,cAAQ,GAAR,CAAY,IAAZ,EAD8C;AAE9C,aAAO,MAAP,CAAc,EAAd,CAAiB,OAAjB,CAF8C;;AAI9C,aAJ8C;KAAV,CAAtC,CADkE;;AAQlE,aAAS,IAAT,CAAc,SAAS,cAAT,EAAyB,UAAvC,EARkE;GAAhB,CAApD,CAlB6B;CAAZ,CAAnB","file":"components/peerjs/index.spec.js","sourcesContent":["'use strict';\n\nimport peerjsFactory  from './index';\nimport eventBusFactory  from '../eventBus/index.js';\nimport session from '../store/session.js'\n\ndescribe('Peerjs', function () {\n\n  var eventBus = new eventBusFactory();\n  var peerjs;\n  const testId = 'testPeerJs';\n  var testClient = {id:testId,key:'test',token:'test',ip:'1.1.1.2',socket:{send:sinon.spy(), on:sinon.spy(), close:sinon.spy()}};\n  var testUser = {validateUser:()=>true,isConnectionAllowed:()=>true}\n\n  before(function () {\n    peerjs = new peerjsFactory(eventBus, session, testUser);\n  });\n\n\n\n  it('should begin defined', function () {\n    peerjs.should.be.defined;\n  });\n\n  it('should emit open connection on proper request', function (done) {\n    eventBus.once(eventBus.ACCEPT_CLIENT, (client)=>{\n      console.log('yo')\n      client.should.be.defined;\n\n      done();\n    })\n\n    eventBus.emit(eventBus.NEW_CONNECTION, testClient);\n  });\n\n\n\n});\n"],"sourceRoot":"/source/"}